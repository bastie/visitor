<html>
<head>
<script type="text/javascript">
  var handler;

  function setRequestHandler () {
	  if (-1 == navigator.userAgent.search("Visitor")) {
		  handler = new XMLHttpRequest();
	  }
	  else {
		  handler = localXMLHttpRequest;
	  }
  }
  
  function sendData() {
	  if (handler === undefined) setRequestHandler();
	  
	  var xmlRequest = handler;
	  document.getElementById("status").innerHTML = xmlRequest.timeout;
	  
	  document.getElementById("status").innerHTML = navigator.userAgent;
	  document.getElementById("status").innerHTML = navigator.userAgent.search("Visitor");
  }
  
  function test() {
	  if (handler === undefined) setRequestHandler();
	  document.getElementById("status").innerHTML = handler;

	  handler.open("POST", "./yippi");
	  handler.send("Here I am");
	  handler.close();
  }
</script>

</head>
<body>
  <button onclick="sendData()" text="Knopf">Buttonchen</button>
  <button onclick="test()" text="Knopf">Test</button>
  <hr>
  Status: <div id="status"></div>
</body>
</html>